<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test PayPal Client ID</title>
</head>
<body>
    <h1>Test d'int√©gration PayPal</h1>
    <div id="status"></div>
    <div id="paypal-button-container"></div>

    <script>
        const clientId = 'AdT-LwZtwJCWWY-mQxdypz0Ael6KiDY4Puw2QOrgppkh7379iy-cpwsC1a4u9RfSrQC9pqFX-FOFqWTb';
        const statusDiv = document.getElementById('status');
        
        console.log('üîç Test du Client ID PayPal...');
        console.log('Client ID:', clientId);
        
        statusDiv.innerHTML = '<p>‚è≥ Chargement du SDK PayPal...</p>';

        // Charger le SDK PayPal
        const script = document.createElement('script');
        script.src = `https://www.paypal.com/sdk/js?client-id=${clientId}&currency=EUR`;
        script.async = true;
        
        script.onload = () => {
            console.log('‚úÖ SDK PayPal charg√© avec succ√®s');
            statusDiv.innerHTML = '<p style="color: green;">‚úÖ SDK PayPal charg√© avec succ√®s</p><p>‚è≥ Rendu des boutons...</p>';
            
            // Rendre les boutons PayPal
            window.paypal.Buttons({
                style: {
                    layout: 'vertical',
                    color: 'blue',
                    shape: 'rect',
                    label: 'paypal'
                },
                createOrder: (data, actions) => {
                    console.log('üí∞ Cr√©ation de la commande de test pour 20‚Ç¨');
                    return actions.order.create({
                        purchase_units: [{
                            amount: {
                                currency_code: 'EUR',
                                value: '20.00'
                            },
                            description: 'Test PayPal - 20‚Ç¨'
                        }]
                    });
                },
                onApprove: async (data, actions) => {
                    console.log('‚úÖ Paiement approuv√©');
                    const details = await actions.order.capture();
                    console.log('‚úÖ Paiement captur√©:', details);
                    alert('Paiement r√©ussi ! Transaction ID: ' + details.id);
                },
                onError: (err) => {
                    console.error('‚ùå Erreur PayPal:', err);
                    statusDiv.innerHTML += '<p style="color: red;">‚ùå Erreur: ' + err.message + '</p>';
                },
                onCancel: (data) => {
                    console.log('‚ö†Ô∏è Paiement annul√©');
                    alert('Paiement annul√©');
                }
            }).render('#paypal-button-container')
            .then(() => {
                console.log('‚úÖ Boutons PayPal rendus avec succ√®s');
                statusDiv.innerHTML = '<p style="color: green;">‚úÖ Boutons PayPal rendus avec succ√®s</p>';
            })
            .catch(err => {
                console.error('‚ùå Erreur lors du rendu:', err);
                statusDiv.innerHTML = '<p style="color: red;">‚ùå Erreur lors du rendu: ' + err.message + '</p>';
            });
        };
        
        script.onerror = (err) => {
            console.error('‚ùå Erreur de chargement du SDK:', err);
            statusDiv.innerHTML = '<p style="color: red;">‚ùå Erreur de chargement du SDK PayPal. V√©rifiez le Client ID.</p>';
        };
        
        document.body.appendChild(script);
    </script>
</body>
</html>
